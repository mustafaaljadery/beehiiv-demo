<div class="p-8 flex flex-col flex-1">
  <h1 class="font-bold text-gray-900 text-4xl">File a Support Ticket</h1>
  <p class="mt-6 font-regular text-[#363636]"><span class="font-semibold text-gray-900">Expected wait time:</span> 24-48 hours, pending your plan tier.</p>
  <p class="mt-3 font-regular text-[#363636]">Want answers sooner? We just launched an expansive <a href="https://support.beehiiv.com/hc/en-us" target="_blank" rel="noopener noreferrer" class="underline text-[#D71897] hover:opacity-90">Knowledge Base</a> that should provide answers to 95% of all questions. We recommend checking <a href="https://support.beehiiv.com/hc/en-us" target="_blank" rel="noopener noreferrer" class="underline text-[#D71897] hover:opacity-90">there</a> first.</p>
  <h2 class="mt-12 text-3xl font-bold text-gray-800">New Support Ticket</h2>
  <%= form_with(model: @entry, url: entries_path, method: :post, id: "entry-form", local: true, html: {class: "flex flex-col w-full mt-8"}) do |form| %>

  <div class="flex flex-col space-y-2.5 w-1/2">
    <%= form.label :subject, class: "font-medium text-[#363636]" %>
    <%= form.text_field :subject, required: true, placeholder: "Subject...", class: "rounded border-gray-300 border rounded focus:ring-0 focus:outline-none text-sm focus:border-[#D71897]" %>
  </div>

  <div class="mt-5 flex flex-col space-y-2.5 w-1/2">
    <%= form.label :description, class: "" %>
    <%= form.text_area :description, required:true, placeholder: "Description...", class: "rounded border-gray-300 border rounded focus:ring-0 focus:outline-none text-sm focus:border-[#D71897]" %>
  </div>

  <div class="mt-5 flex flex-col space-y-2.5 w-1/2">
    <div class="w-full flex flex-row justify-between items-between">
      <%= form.label :priority, class: "text-sm font-medium text-[#363636]" %>
      <p class="my-auto text-gray-500 text-sm">1: Lowest, 3: Highest</p>
    </div>
    <%= form.number_field :priority, required: true, in: 1..3, placeholder: "1 to 3", class: "rounded border-gray-300 border rounded focus:ring-0 focus:outline-none text-sm focus:border-[#D71897]" %>
  </div>

  <div class="flex flex-row justify-end mt-10 items-end w-1/2">
    <%= form.button id:"submit-button", class: "text-sm rounded bg-[#D71897] font-semibold px-4 py-1.5 hover:opacity-90 text-white", type: "submit" do %>
      Create Entry
    <% end %>
  </div>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const entryForm = document.getElementById("entry-form");
    const formInputs = entryForm.querySelectorAll("input, textarea");
    
    entryForm.addEventListener("submit", function() {
      const submitButton = entryForm.querySelector("button[type='submit']");
      submitButton.disabled = true;

      setTimeout(function() {
        formInputs.forEach(function(input) {
          input.value = ""; 
        });
        submitButton.disabled = false; 
      }, 1000);
    });
  });
</script>